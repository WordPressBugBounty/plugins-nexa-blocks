(()=>{"use strict";const e=window.React,t=window.wp.i18n,n=window.wp.data,s=window.wp.keyboardShortcuts,o=window.wp.plugins,i=window.wp.editPost,r=window.wp.element,l={copy:(0,e.createElement)("svg",{width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},(0,e.createElement)("g",{id:"surface1"},(0,e.createElement)("path",{style:{fill:"none",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",stroke:"rgb(18.039216%,38.431373%,100%)",strokeOpacity:1,strokeMiterlimit:4},d:"M 47 17 L 47 23 C 47 24.107143 47.892857 25 49 25 L 55 25 L 47 17 L 41 17 L 41 46 C 41 47.107143 40.107143 48 39 48 L 11 48 C 9.892857 48 9 47.107143 9 46 L 9 7 C 9 5.892857 9.892857 5 11 5 L 33 5 L 41 13 L 35 13 C 33.892857 13 33 12.107143 33 11 L 33 5 ",transform:"matrix(0.21875,0,0,0.21875,0,0)"}),(0,e.createElement)("path",{style:{fill:"none",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",stroke:"rgb(18.039216%,38.431373%,100%)",strokeOpacity:1,strokeMiterlimit:4},d:"M 55 29 L 55 57 C 55 58.107143 54.107143 59 53 59 L 25 59 C 23.892857 59 23 58.107143 23 57 L 23 48 ",transform:"matrix(0.21875,0,0,0.21875,0,0)"}))),paste:(0,e.createElement)("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},(0,e.createElement)("g",{id:"surface1"},(0,e.createElement)("path",{style:{fill:"none",strokeWidth:5,strokeLinecap:"butt",strokeLinejoin:"miter",stroke:"rgb(18.039216%,38.431373%,100%)",strokeOpacity:1,strokeMiterlimit:4},d:"M 68 63 C 68 58.03125 72.03125 54 77 54 L 91.125 54 C 93 54 94.78125 54.75 96.09375 56.03125 L 100.9375 60.875 L 102.15625 62.21875 C 103.34375 63.53125 104 65.21875 104 66.96875 L 104 93 C 104 97.96875 99.96875 102 95 102 L 77 102 C 72.03125 102 68 97.96875 68 93 Z M 68 63 ",transform:"matrix(0.125,0,0,0.125,0,0)"}),(0,e.createElement)("path",{style:{fill:"none",strokeWidth:5,strokeLinecap:"butt",strokeLinejoin:"miter",stroke:"rgb(18.039216%,38.431373%,100%)",strokeOpacity:1,strokeMiterlimit:4},d:"M 91 54 L 91 35 C 91 30.03125 86.96875 26 82 26 L 42 26 C 37.03125 26 33 30.03125 33 35 L 33 93 C 33 97.96875 37.03125 102 42 102 L 80 102 M 91 55 L 91 65 C 91 66.65625 92.34375 68 94 68 L 104 68 ",transform:"matrix(0.125,0,0,0.125,0,0)"}),(0,e.createElement)("path",{style:{fill:"none",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"miter",stroke:"rgb(18.039216%,38.431373%,100%)",strokeOpacity:1,strokeMiterlimit:4},d:"M 50 34 C 51.1875 34 66.15625 34 73.5 34 ",transform:"matrix(0.125,0,0,0.125,0,0)"})))},a=(e=!1)=>{if(!window.localStorage)return null;if(!e)return localStorage;const t=localStorage.getItem(e);return t?JSON.parse(t):null},c=["nx_flexDirectionDesk","nx_flexDirectionTab","nx_flexDirectionMob","nx_columnGapRanges","nx_rowGapRanges","nx_columnGapUnits","nx_rowGapUnits","nx_icWidthRanges","nx_icWidthUnits","nx_flexWrapDesk","nx_flexWrapTab","nx_flexWrapMob","nx_alignItemsDesk","nx_alignItemsTab","nx_alignItemsMob","nx_justifyContentDesk","nx_justifyContentTab","nx_justifyContentMob"];(0,o.registerPlugin)("nexa-block-copy-paste",{render:()=>{const{registerShortcut:o}=(0,n.useDispatch)(s.store),{hasMultiSelection:p}=(0,n.select)("core/block-editor"),k=a();(0,r.useEffect)((()=>{const e=a("nexaCopyPasteStyles");if(e||k.setItem("nexaCopyPasteStyles",JSON.stringify({})),e){for(const t in e)Math.abs(Date.now()-e[t].stylesSavedTimeStamp)/36e5>=8&&delete e[t];k.setItem("nexaCopyPasteStyles",JSON.stringify(e))}o({name:"nexa/copy",category:"block",description:(0,t.__)("Copy the selected block(s).","nexa-blocks"),keyCombination:{modifier:"primaryShift",character:"y"}}),o({name:"nexa/paste",category:"block",description:(0,t.__)("Paste the selected block(s).","nexa-blocks"),keyCombination:{modifier:"primaryShift",character:"u"}})}),[]);const d=()=>{const{getSelectedBlock:e,hasMultiSelection:t,getMultiSelectedBlocks:s}=(0,n.select)("core/block-editor");if(t())return void s().map((e=>(e&&x(e),e)));const o=e();o&&x(o)},m=()=>{const{getSelectedBlock:e,hasMultiSelection:t,getMultiSelectedBlocks:s}=(0,n.select)("core/block-editor");if(t())return void s().map((e=>(e&&u(e),e)));const o=e();o&&u(o)},x=e=>{const t=a("nexaCopyPasteStyles");k.setItem("nexaCopyPasteStyles",JSON.stringify({}));const{attributes:n,name:s,innerBlocks:o}=e;t&&k.setItem("nexaCopyPasteStyles",JSON.stringify({}));let i={};const r={};if(s.includes("nexa/")){const e=s.replace("nexa/","");let l=n;t[`${e}-styles`]={},t["global-style"]={},l&&t&&Object.keys(l).map((e=>{let t=e;return void 0!==n[e]&&null!==n[e]&&t.includes("nx_")&&!c.includes(t)&&(i[t]=n[e],r[e]=n[e]),e})),o&&(r.innerblocks=o),i.stylesSavedTimeStamp=Date.now(),t[`${e}-styles`]=r,t["global-style"]=i,k.setItem("nexaCopyPasteStyles",JSON.stringify(t))}},u=e=>{const{name:t,clientId:n,innerBlocks:s}=e;let o,i;const r={},l=a("nexaCopyPasteStyles");if(t.includes("nexa/")){o=l["global-style"];const a=t.replace("nexa/",""),p=e.attributes;if(i=l[`${a}-styles`],p&&i){if(y(n,i),s){const e={};s.map(((t,n)=>{const s=t.name.replace("nexa/",""),o=t.attributes;return i.innerblocks[n].name==="nexa/"+s&&Object.keys(o).map((t=>(t.includes("nx_")&&!c.includes(t)&&(e[t]=i.innerblocks[n].attributes[t]),e))),y(t.clientId,e),t}))}}else p&&o&&(Object.keys(p).map((e=>{const t=e;return Object.keys(o).map((n=>(n===t&&t.includes("nx_")&&!c.includes(t)&&(r[e]=o[t]),r))),r})),y(n,r))}},y=(e,t)=>{(0,n.dispatch)("core/block-editor").updateBlockAttributes(e,t)};(0,s.useShortcut)("nexa/copy",(e=>{d(),e.preventDefault()})),(0,s.useShortcut)("nexa/paste",(e=>{m(),e.preventDefault()})),p()&&(stylesText=(0,t.__)("Styles","nexa-blocks"));const b=(0,n.select)("core/block-editor").getSelectedBlock();if(b)return b.name.includes("nexa/")?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.PluginBlockSettingsMenuItem,{icon:l.copy,label:(0,t.__)("Nexa Copy Styles","nexa-blocks"),onClick:d}),(0,e.createElement)(i.PluginBlockSettingsMenuItem,{icon:l.paste,label:(0,t.__)("Nexa Paste Styles","nexa-blocks"),onClick:m})):void 0}})})();